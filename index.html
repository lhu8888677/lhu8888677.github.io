<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>åœŸåœ°è¤‡ä¸ˆè¦è²»è©¦ç®—ï¼ˆåŠŸèƒ½ç‰ˆï¼‰</title>

  <!-- âœ… æ­£ç¢º PWA è¨­å®š -->
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#cc5500">

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
  </script>

  <style>
    body { font-family: "Microsoft JhengHei", sans-serif; text-align: center; background: #f5f5f5; padding: 40px; }
    .box { background: white; border-radius: 10px; padding: 30px; box-shadow: 0 0 10px rgba(0,0,0,0.1); display: inline-block; }
    input, select, button { margin: 6px; padding: 8px; font-size: 16px; }
    #result span { color: red; font-weight: bold; display: block; margin: 4px 0; }
    #history { margin-top: 20px; text-align: left; max-width: 500px; margin-left: auto; margin-right: auto; }
    #history ul { padding-left: 20px; }
    #history li { line-height: 1.6; }
  </style>
</head>
<body>
<div class="box">
  <div style="margin-top: 30px;">
  <p><strong>å¿«é€Ÿé€£çµï½œFOLLOW US</strong></p>
  <a href="https://line.me/ti/p/aLynUIRtsJ" target="_blank">ğŸ‘‰ LINE è«®è©¢</a><br>
  <a href="https://www.facebook.com/profile.php?id=100082625327420" target="_blank">ğŸ‘‰ Facebook ç²‰å°ˆ</a><br>
  <a href="https://www.facebook.com/groups/923714991628656" target="_blank">ğŸ‘‰ Facebook ç¤¾åœ˜</a><br>
  <a href="https://www.instagram.com/hanwu_liang/" target="_blank">ğŸ‘‰ IGï¼š@hanwu_liang</a>
</div>

    <img src="logo.png" alt="å¥‘åˆä¸å‹•ç”¢ LOGO" style="max-width: 100px; margin-bottom: 10px;">
    <h2>åœŸåœ°è¤‡ä¸ˆè¦è²»è©¦ç®—ï¼ˆåŠŸèƒ½ç‰ˆï¼‰</h2>
    <p>ä¸å‹•ç”¢ç¶“ç´€äººï¼šæ—æ¢ç¥–<br>é›»è©±ï¼š<a href="tel:0912428605">0912428605</a></p>
    <label>è¤‡ä¸ˆé¡å‹ï¼š</label>
    <select id="type">
      <option value="é‘‘ç•Œè¤‡ä¸ˆ">é‘‘ç•Œè¤‡ä¸ˆ</option>
      <option value="åˆ†å‰²ç­‰">åˆ†å‰²ã€èª¿æ•´ç­‰</option>
    </select><br>
    <label>åœŸåœ°é¢ç©ï¼ˆã¡ï¼‰ï¼š</label>
    <input type="number" id="area" value="100" /><br>
    <label>æ–½æ¸¬å–®ä½æ•¸ï¼š</label>
    <input type="number" id="units" value="5" /><br>
    <button onclick="calculate()">è©¦ç®—</button>

    <div id="result" style="margin-top:20px;"></div>

    <div style="margin-top:20px;">
      <button onclick="exportTXT()">åŒ¯å‡º TXT</button>
      <button onclick="window.print()">åˆ—å°æœ¬é </button>
      <button onclick="showHistory()">æ­·å²ç´€éŒ„</button>
      <button onclick="clearHistory()">æ¸…é™¤æ­·å²ç´€éŒ„</button>
    </div>

    <div id="history"></div>

    <div style="margin-top: 30px;">
      <a href="index_links.html" style="display:inline-block;padding:10px 20px;border-radius:8px;background:#cc5500;color:#fff;text-decoration:none;">ğŸ“Œ å‰å¾€å¿«é€Ÿå°è¦½é </a>
    </div>

<script>
function getBase(type, area) {
  if (area < 200) return type === "é‘‘ç•Œè¤‡ä¸ˆ" ? 2500 : 1500;
  else if (area >= 200 && area < 1000) return type === "é‘‘ç•Œè¤‡ä¸ˆ" ? 3000 : 2000;
  else if (area >= 1000 && area < 10000) return type === "é‘‘ç•Œè¤‡ä¸ˆ" ? 3500 : 2500;
  else return type === "é‘‘ç•Œè¤‡ä¸ˆ" ? 4000 : 3000;
}
function calculate(){
  const area = parseFloat(document.getElementById("area").value) || 0;
  const units = parseInt(document.getElementById("units").value) || 0;
  const type = document.getElementById("type").value;
  const base = getBase(type, area);
  const unitRate = type === "é‘‘ç•Œè¤‡ä¸ˆ" ? 1000 : 500;
  const unitCount = type === "é‘‘ç•Œè¤‡ä¸ˆ" ? Math.ceil(units / 5) : units;
  const unitFee = unitRate * unitCount;
  const total = base + unitFee;

  document.getElementById("result").innerHTML =
    '<span>åŸºæœ¬è²»ï¼š' + base + ' å…ƒ</span>' +
    '<span>æ–½æ¸¬è²»ï¼ˆ' + unitCount + ' å–®ä½ Ã— ' + unitRate + ' å…ƒï¼‰ï¼š' + unitFee + ' å…ƒ</span>' +
    '<span>åˆè¨ˆï¼š' + total + ' å…ƒ</span>';

  let h = JSON.parse(localStorage.getItem("calcHistory") || "[]");
  h.unshift(`é¡å‹ï¼š${type}ï½œé¢ç©ï¼š${area}ã¡ï½œå–®ä½ï¼š${units}ï½œå…±ï¼š${total}å…ƒ`);
  if (h.length > 10) h = h.slice(0, 10);
  localStorage.setItem("calcHistory", JSON.stringify(h));
}
function exportTXT() {
  const t = document.getElementById("result").innerText;
  const b = new Blob([t], { type: "text/plain" });
  const u = URL.createObjectURL(b);
  const a = document.createElement("a");
  a.href = u;
  a.download = "è¤‡ä¸ˆè©¦ç®—çµæœ.txt";
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
}
function showHistory() {
  const h = JSON.parse(localStorage.getItem("calcHistory") || "[]");
  let html = "<strong>æ­·å²ç´€éŒ„</strong><ul>";
  h.forEach(i => html += "<li>" + i + "</li>");
  html += "</ul>";
  document.getElementById("history").innerHTML = html;
}
function clearHistory() {
  localStorage.removeItem("calcHistory");
  document.getElementById("history").innerHTML = "";
}
</script>
</body>
</html>
