<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<style>
  .badge-offline{
    display:inline-block;background:#ff0000;color:#fff;font-weight:700;
    font-size:12px;line-height:1;padding:2px 6px;border-radius:4px;
    margin-left:6px;vertical-align:middle;box-shadow:0 4px 10px rgba(37,99,235,.25);
    user-select:none;
  }
</style>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>åœŸåœ°è¤‡ä¸ˆè¦è²»è©¦ç®—ï¼ˆåŠŸèƒ½ç‰ˆï¼‰</title>

  <!-- âœ… PWA -->
  <link rel="manifest" href="https://lhu8888677.github.io/manifest.json">
  <link rel="apple-touch-icon" href="https://lhu8888677.github.io/icons/icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#cc5500">

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js').catch(()=>{});
    }
  </script>

  <style>
    :root{
      --brand:#cc5500;
      --accent:#0b63d8;
      --bg:#f6f6f6;
      --card:#ffffff;
      --muted:#666;
      --radius:16px;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
    html,body{height:100%;margin:0}
    body{
      font-family:"Microsoft JhengHei",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans TC",sans-serif;
      background:var(--bg);
      display:flex; align-items:center; justify-content:center;
      padding:clamp(12px,2vw,24px);
      color:#222;
    }
    .app{
      width:min(96vw,1080px);
      min-height:min(92vh,720px);
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      display:grid;
      grid-template-rows:auto 1fr auto;
      overflow:hidden;
    }
    /* Header */
    
     /* 90px -> 135pxï¼ˆæ”¾å¤§ 0.5 å€ï¼‰ */
    .title-wrap{display:flex;flex-direction:column;gap:4px}
    .title{margin:0;font-size:clamp(18px,2.2vw,28px);letter-spacing:.02em}
    .contact{margin:0;color:var(--accent);font-weight:800;font-size:clamp(13px,1.4vw,16px)}

    /* Content */
    .content{display:grid;grid-template-columns:1fr;gap:clamp(12px,2vw,24px);padding:clamp(16px,2.2vw,28px)}
    @media (min-width: 900px) and (orientation: landscape){
      .content{grid-template-columns:1.1fr .9fr;align-items:start}
    }
    .card{background:#fff;border:1px solid #eee;border-radius:12px;padding:clamp(14px,1.8vw,20px)}
    .row{display:flex;align-items:center;gap:10px;margin:10px 0;flex-wrap:wrap}
    label{min-width:120px;text-align:right}
    input,select,button{font-size:16px;padding:10px 12px;border:1px solid #ddd;border-radius:10px;outline:none}
    input,select{min-width:220px;max-width:100%}
    .btn{cursor:pointer;background:var(--brand);color:#fff;border:none;padding:12px 18px;border-radius:10px;font-weight:700}
    .btn:active{transform:translateY(1px)}
    #result{margin-top:10px}
    #result span{display:block;margin:4px 0;color:#c1121f;font-weight:800}
    .muted{color:var(--muted);font-size:12px}

    .links h3{margin:0 0 10px 0;font-size:16px}
    .links p{margin:6px 0}
    .links a{color:#0b63d8}

    /* Footer */
    .footer{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:clamp(12px,2vw,18px);border-top:1px solid #eee;background:linear-gradient(0deg,#fff,#fff8)}

    /* Mobile portrait tweaks */
    @media (max-width: 899px), (orientation: portrait){
      .row{flex-direction:column;align-items:stretch}
      label{text-align:left;min-width:auto}
      input,select{width:100%}
      
      .footer{position:sticky;bottom:0}
    }
  
.logo{
  width:300px;
  max-height:300px;
  height:auto;
  flex:0 0 auto;
}
@media (max-width: 899px){
  .logo{
    width:300px;
    max-height:300px;
    margin:12px auto;
    display:block;
  }
}


.header{
  display:flex;
  align-items:center;
  gap:16px;
}
@media (max-width: 899px){
  .header{
    flex-direction:column;
    align-items:center;
    text-align:center;
  }
}


@media (max-width: 768px) {
    .logo {
        width: 225px;
        height: 225px;
    }
}


/* logo-size-custom */
.logo {
    width: 300px;
    height: 300px;
    object-fit: contain;
}
@media (max-width: 768px) {
    .logo {
        width: 225px;
        height: 225px;
    }
}

</style>

<style id="logo-style">
/* Logo çµ±ä¸€æ¨£å¼ */
.logo {
    width: 300px;
    height: auto;
}
@media (max-width: 900px) {
    .logo {
        width: 300px;
        margin-top: 12px;
        margin-bottom: 12px;
    }
}

@media (max-width: 768px) {
    .logo {
        width: 225px;
        height: 225px;
    }
}

</style>

</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <img class="logo" src="logo.png" alt="å¥‘åˆä¸å‹•ç”¢ LOGO" loading="eager" fetchpriority="high">
      <div class="title-wrap">
        <h1 class="title">åœŸåœ°è¤‡ä¸ˆè¦è²»è©¦ç®—ï¼ˆåŠŸèƒ½ç‰ˆï¼‰ <span class="badge-offline" title="å·²å¿«å–ï¼Œå¯é›¢ç·šä½¿ç”¨">å¯é›¢ç·š</span></h1>
        <p class="contact">ä¸å‹•ç”¢ç¶“ç´€äººï¼šæ—æ¢ç¥–ã€€ï½œã€€é›»è©±ï¼š<a href="tel:0912428605">0912428605</a></p>
      </div>
    </header>

    <!-- Content -->
    <main class="content">
      <!-- å·¦ï¼šè©¦ç®— -->
      <section class="card">
        <div class="row">
          <label for="type">è¤‡ä¸ˆé¡å‹ï¼š</label>
          <select id="type">
            <option value="é‘‘ç•Œè¤‡ä¸ˆ">é‘‘ç•Œè¤‡ä¸ˆ</option>
            <option value="åˆ†å‰²ç­‰">åˆ†å‰²ã€èª¿æ•´ç­‰</option>
          </select>
        </div>

        <div class="row">
          <label for="area">åœŸåœ°é¢ç©ï¼ˆã¡ï¼‰ï¼š</label>
          <input type="number" id="area" value="100" min="0" step="1">
        </div>

        <div class="row">
          <label for="units">æ–½æ¸¬å–®ä½æ•¸ï¼š</label>
          <input type="number" id="units" value="5" min="0" step="1">
        </div>

        <div class="row">
          <button class="btn" onclick="calculate()" style="text-align:center;display:block;margin:0 auto">è©¦ç®—</button>
        </div>

        <div id="result"></div>

        <div class="row" style="gap:8px;flex-wrap:wrap">
          <button onclick="exportTXT()">åŒ¯å‡º TXT</button>
          <button onclick="window.print()">åˆ—å°æœ¬é </button>
          <button onclick="showHistory()">æ­·å²ç´€éŒ„</button>
          <button onclick="clearHistory()">æ¸…é™¤æ­·å²ç´€éŒ„</button>
        </div>

        <p class="muted">é¦–æ¬¡é–‹å•Ÿæœƒå¿«å–ï¼›ä¹‹å¾Œå¯é›¢ç·šä½¿ç”¨ï¼ˆä¸é€£ç¶²äº¦èƒ½é–‹å•Ÿï¼‰ã€‚</p>
        <div id="history" style="margin-top:10px;"></div>
      </section>

      <!-- å³ï¼šé€£çµèˆ‡å®‰è£ -->
      <aside class="card links">
        <h3>å¿«é€Ÿé€£çµï½œé—œæ³¨æˆ‘</h3>
        <p>ğŸ‘‰ <a href="https://line.me/ti/p/aLynUIRtsJ" target="_blank" rel="noopener">LINE è«®è©¢</a></p>
        <p>ğŸ‘‰ <a href="https://www.facebook.com/profile.php?id=100082625327420" target="_blank" rel="noopener">Facebook ç²‰å°ˆ</a></p>
        <p>ğŸ‘‰ <a href="https://www.facebook.com/groups/923714991628656" target="_blank" rel="noopener">Facebook ç¤¾åœ˜</a></p>
        <p>ğŸ‘‰ <a href="https://www.instagram.com/hanwu_liang/" target="_blank" rel="noopener">IGï¼š@hanwu_liang</a></p>
        <p>ğŸ‘‰ <a href="https://www.youtube.com/@h-ul4237" target="_blank" rel="noopener">YouTube é »é“</a></p>
        <p>ğŸ‘‰ <a href="https://www.threads.net/@hanwu_liang" target="_blank" rel="noopener">Threads</a></p>
        <hr>
        <p><strong>ğŸ“± åˆ†äº«èˆ‡å®‰è£æç¤º</strong></p>
        <div class="row" style="gap:8px;flex-wrap:wrap">
          <button onclick="sharePage()">ğŸ”— åˆ†äº«æ­¤ç¶²ç«™</button>
          <button id="installBtn" style="display:none;">ğŸ“² åŠ å…¥ä¸»ç•«é¢</button>
        </div>
        <p class="muted" style="margin-top:6px;">æ‚¨å¯ä½¿ç”¨ç€è¦½å™¨é¸å–®ã€ŒåŠ å…¥ä¸»ç•«é¢ã€ã€‚</p>
        <div style="margin-top: 10px;">
          <a href="https://lhu8888677.github.io/index_links.html" style="display:inline-block;padding:10px 16px;border-radius:10px;background:#009688;color:#fff;text-decoration:none;">ğŸ“Œ å‰å¾€å¿«é€Ÿå°è¦½é </a>
        </div>
      </aside>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <span class="muted">Â© å¥‘åˆä¸å‹•ç”¢</span>
      <a class="btn" style="background:#ff7043;color:#fff" href="https://line.me/ti/p/aLynUIRtsJ" target="_blank" rel="noopener" style="text-decoration:none">ç«‹å³ LINE è«®è©¢</a>
    </footer>
  </div>

  <!-- Scripts: ä¿ç•™åŸåŠŸèƒ½ -->
  <script>
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      const installBtn = document.getElementById("installBtn");
      if (installBtn) {
        installBtn.style.display = "inline-block";
        installBtn.addEventListener('click', () => {
          deferredPrompt.prompt();
          deferredPrompt.userChoice.finally(() => deferredPrompt = null);
        });
      }
    });

    function getBase(type, area) {
      if (area < 200) return type === "é‘‘ç•Œè¤‡ä¸ˆ" ? 2500 : 1500;
      if (area < 1000) return type === "é‘‘ç•Œè¤‡ä¸ˆ" ? 3000 : 2000;
      if (area < 10000) return type === "é‘‘ç•Œè¤‡ä¸ˆ" ? 3500 : 2500;
      return type === "é‘‘ç•Œè¤‡ä¸ˆ" ? 4000 : 3000;
    }
    function calculate(){
      const area = Math.max(0, parseFloat(document.getElementById("area").value) || 0);
      const units = Math.max(0, parseInt(document.getElementById("units").value) || 0);
      const type = document.getElementById("type").value;
      const base = getBase(type, area);
      const unitRate = type === "é‘‘ç•Œè¤‡ä¸ˆ" ? 1000 : 500;
      const unitCount = type === "é‘‘ç•Œè¤‡ä¸ˆ" ? Math.ceil(units / 5) : units;
      const unitFee = unitRate * unitCount;
      const total = base + unitFee;

      document.getElementById("result").innerHTML =
        '<span>åŸºæœ¬è²»ï¼š' + base.toLocaleString() + ' å…ƒ</span>' +
        '<span>æ–½æ¸¬è²»ï¼ˆ' + unitCount + ' å–®ä½ Ã— ' + unitRate.toLocaleString() + ' å…ƒï¼‰ï¼š' + unitFee.toLocaleString() + ' å…ƒ</span>' +
        '<span style="font-size:20px">åˆè¨ˆï¼š' + total.toLocaleString() + ' å…ƒ</span>';

      let h = JSON.parse(localStorage.getItem("calcHistory") || "[]");
      h.unshift(`é¡å‹ï¼š${type}ï½œé¢ç©ï¼š${area}ã¡ï½œå–®ä½ï¼š${units}ï½œå…±ï¼š${total}å…ƒ`);
      if (h.length > 12) h = h.slice(0, 12);
      localStorage.setItem("calcHistory", JSON.stringify(h));
    }
    function exportTXT() {
      const t = document.getElementById("result").innerText || 'å°šæœªè©¦ç®—';
      const b = new Blob([t], { type: "text/plain" });
      const u = URL.createObjectURL(b);
      const a = document.createElement("a");
      a.href = u;
      a.download = "è¤‡ä¸ˆè©¦ç®—çµæœ.txt";
      document.body.appendChild(a); a.click();
      document.body.removeChild(a); URL.revokeObjectURL(u);
    }
    function showHistory() {
      const h = JSON.parse(localStorage.getItem("calcHistory") || "[]");
      let html = "<strong>æ­·å²ç´€éŒ„</strong><ul>";
      h.forEach(i => html += "<li>" + i + "</li>");
      html += "</ul>";
      document.getElementById("history").innerHTML = html;
    }
    function clearHistory() {
      localStorage.removeItem("calcHistory");
      document.getElementById("history").innerHTML = "";
    }
    function sharePage() {
      if (navigator.share) {
        navigator.share({
          title: 'åœŸåœ°è¤‡ä¸ˆè¦è²»è©¦ç®—',
          text: 'å¿«é€Ÿè©¦ç®—è¦è²»å·¥å…·ï¼Œç«‹å³ä½¿ç”¨ï¼',
          url: window.location.href
        }).catch(()=>{});
      } else {
        alert('æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´åˆ†äº«åŠŸèƒ½ï¼Œè«‹æ‰‹å‹•è¤‡è£½ç¶²å€');
      }
    }
  </script>
</body>
</html>
